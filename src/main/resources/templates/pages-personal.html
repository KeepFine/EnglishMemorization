<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="common/head :: head(~{::link},~{})">


<body>
<div th:replace="common/frame :: frame"></div>
<link th:href="@{/css/bootstrap-datepicker.min.css}" rel="stylesheet">
<script th:src="@{/js/jquery-3.3.1.min.js}"></script>
<script th:inline="javascript">
    function Epwd(){
        $.post(
            {
                url:"/ajax/Epwd",
                data:{"pass":$("#pass").val()},
                dataType:"json",
                success:function (data){
                    var inf = data;
                    var inf1 = JSON.stringify(inf)
                    if(inf1 == "\"密码错误\""){
                        $('#userinfo').css("color","red")
                    }else {
                        $('#userinfo').css("color","green")
                    }
                    $("#userinfo").html(data.toString());
                }
            }
        )

    }

</script>
<div class="wrapper">
    <div class="container-fluid">

        <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">

                        <h4 class="mt-0 header-title">基本信息</h4>
                        <p class="sub-title">修改你的基本信息</p>

                        <form class="" th:action="@{/ToDo/updataUserMsg}">
                            <div class="form-group">
                                <label>用户名</label>
                                <input type="text" class="form-control" name="userName" required="" th:value="${session.userName}">
                            </div>

                            <div class="form-group">
                                <label>邮箱</label>
                                <div>
                                    <input type="email" id="email" name="mail" class="form-control" required="" th:value="${session.mail}">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>密保答案</label>
                                <div>
                                    <input type="password" name="ask" class="form-control" required="" th:value="${session.ask}">
                                </div>
                            </div>

                            <div class="form-group mb-0">
                                <div>
                                    <button type="submit" class="btn btn-primary waves-effect waves-light">
                                        提交
                                    </button>
                                    <button type="reset" class="btn btn-secondary waves-effect m-l-5">
                                        取消
                                    </button>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
            <!-- end col -->
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-body">

                        <h4 class="mt-0 header-title">修改密码</h4>
                        <p class="sub-title">在此处修改你的密码</p>

                        <form class="" th:action="@{/ToDo/updataPwd}">

                            <div class="form-group">
                                <small  id="userinfo"></small>
                                <label>修改密码</label>
                                <div>
                                    <input type="password" onblur="Epwd()" id="pass" name="pass" class="form-control" required="" placeholder="原密码">
                                </div>
                                <div class="mt-2">
                                    <input type="password" id="userPassword" name="userPassword" class="form-control" required=""  placeholder="新密码">
                                </div>
                            </div>


                            <div class="form-group mb-0">
                                <div>
                                    <button type="submit"  class="btn btn-primary waves-effect waves-light">
                                        提交
                                    </button>
                                    <button type="reset" class="btn btn-secondary waves-effect m-l-5">
                                        取消
                                    </button>
                                </div>
                            </div>
                        </form>
                            <br>
                            <div class="form-group mb-3">
                                <form method="post" th:action="@{/ToDo/upload}" class="dropzone"  enctype="multipart/form-data">
                                    <label>修改头像</label>
                                    <div class="fallback">
                                        <input name="file" type="file" multiple="multiple">
                                    </div>
                                </form>
                            </div>



                    </div>
                </div>
            </div>
        </div>
        <!-- end row -->

    </div>
    <!-- end container-fluid -->
</div>
<script th:src="@{/js/jquery.min.js}"></script>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
<script th:src="@{/js/jquery.slimscroll.js}"></script>
<script th:src="@{/js/waves.min.js}"></script>
<script th:src="@{/js/apexcharts.min.js}"></script>
<script th:src="@{/js/bootstrap-datepicker.min.js}"></script>
<script th:src="@{/js/dropzone.js}"></script>
<script th:src="@{/js/app.js}"></script>
<script th:src="@{/js/parsley.min.js}"></script>
</body>
<footer th:replace="common/foot :: foot(~{::link},~{})">

</footer>
</html>